<!DOCTYPE HTML>
<html lang="zh-CN">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Wiki" />
    <meta name="generator" content="Maverick 1.1" />
    <meta name="template" content="Kepler" />
    <link rel="alternate" type="application/rss+xml" title="热心市民の知识库 &raquo; RSS 2.0" href="/wiki/feed/index.xml" />
    <link rel="alternate" type="application/atom+xml" title="热心市民の知识库 &raquo; ATOM 1.0" href="/wiki/feed/atom/index.xml" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/assets/kepler-cf5c67fd1e.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/assets/ExSearch/ExSearch-182e5a8868.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.10.0/dist/tocbot.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.css">


    <script>
        var ExSearchConfig = {
            root: "",
            api: "https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/ba9b7c0d5ddd7a5be35a247c0580fe30.json"
        }
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function(){
            if(/Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent)){
                document.body.classList.add('safari')
            }else{
                document.body.classList.remove('safari')
            }
        });
    </script>
    
<title>Arch Linux 安装指南 - 热心市民の知识库</title>
<meta name="author" content="waleslau" />
<meta name="description" content="
凡事总须研究，才会明白。网友总劝我放弃，我也还记得，可是不甚清楚。我翻开教程一查，这教程没有年代，歪歪斜斜的每页上都写着“XX速成”几个字。我横竖睡不着，仔细看了半夜，才从字缝里看出字来，满本都写着两个字是“劝退”！

" />
<meta property="og:title" content="Arch Linux 安装指南 - 热心市民の知识库" />
<meta property="og:description" content="
凡事总须研究，才会明白。网友总劝我放弃，我也还记得，可是不甚清楚。我翻开教程一查，这教程没有年代，歪歪斜斜的每页上都写着“XX速成”几个字。我横竖睡不着，仔细看了半夜，才从字缝里看出字来，满本都写着两个字是“劝退”！

" />
<meta property="og:site_name" content="热心市民の知识库" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/wiki/archives/Arch_Linux_Installation_guide/" />
<meta property="og:image" content="" />
<meta property="article:published_time" content="2019-07-27T22:41:00+08.00" />
<meta name="twitter:title" content="Arch Linux 安装指南 - 热心市民の知识库" />
<meta name="twitter:description" content="
凡事总须研究，才会明白。网友总劝我放弃，我也还记得，可是不甚清楚。我翻开教程一查，这教程没有年代，歪歪斜斜的每页上都写着“XX速成”几个字。我横竖睡不着，仔细看了半夜，才从字缝里看出字来，满本都写着两个字是“劝退”！

" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="" />


    
<meta http-equiv="x-dns-prefetch-control" content="on">
<link rel="dns-prefetch" href="//cdn.jsdelivr.net" />
<link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/waleslau/CDN@master/vue.ico">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-144181320-4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-144181320-4');
</script>
<script src="https://cdn.jsdelivr.net/gh/waleslau/live2d-widget@latest/autoload.js"></script>

    </head>
    
    <body class="content">
        <header>
            <div class="container">
                <section>
                    <a href="/wiki/"><img src="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/cat.jpg">热心市民の知识库</a>
                </section>
                <section>
                    <nav>
                        <ul>
                            
                                <li><a href="https://home.oopsky.top/" target="_blank">HOME</a></li>
                            
                                <li><a href="https://blog.oopsky.top/" target="_blank">部落格</a></li>
                            
                        </ul>
                    </nav>
                </section>
    
                <section>
                    <a hidden class="toggle-toc" target="_self" href="javascript:void(0)" onclick="$(body).toggleClass('toc-open')"><i class="fa fa-align-right"></i></a>
                    <a hidden class="toggle-navbar" target="_self" href="javascript:void(0)" onclick="$(body).toggleClass('navbar-open')"><i class="fa fa-indent"></i></a>
                    <button class="search-form-input"><i class="fa fa-search"></i></button>
                </section>
            </div>
        </header>

        <main>
            <div id="pjax-container" class="container">
                <aside id="navbar" class="no-scrollbar">
                    
                    <section class="sidebar-nav">
                        
                            <div class="None" ><span><a href="/wiki/">主页</a></span></div>
                        
                            <div class="None" ><span><a href="/wiki/archives/">归档</a></span></div>
                        
                            <div class="None" ><span><a href="/wiki/about/">关于</a></span></div>
                        
                    </section>
                    
                    <section>
                        
    <div class="open "><span><a href="/wiki/category/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a><button class="toggle_sidebar fa"></button></span><ul><div class="open "><span><a href="/wiki/category/Linux/">Linux</a><button class="toggle_sidebar fa"></button></span><ul><li class=""><a href="/wiki/archives/PVE_%E5%88%9B%E5%BB%BA%E4%B8%B2%E8%A1%8C%E7%AB%AF%E5%8F%A3%E6%9D%A5%E6%94%AF%E6%8C%81%E4%BD%BF%E7%94%A8_xterm_js_%E8%BF%9E%E6%8E%A5%E5%88%B0%E8%99%9A%E6%8B%9F%E6%9C%BA/">PVE 创建串行端口来支持使用 xterm.js 连接到虚拟机</a></li><li class=""><a href="/wiki/archives/Debian%E4%B8%AD%E4%B8%BA%E7%94%A8%E6%88%B7%E6%B7%BB%E5%8A%A0sudo%E6%9D%83%E9%99%90/">Debian中为用户添加sudo权限</a></li><li class=""><a href="/wiki/archives/%E5%9C%A8Linux%E5%AE%8C%E6%95%B4%E8%BF%81%E7%A7%BB%E7%BD%91%E7%AB%99_%E6%95%B0%E6%8D%AE%E5%BA%93/">在Linux完整迁移网站&数据库</a></li><li class=""><a href="/wiki/archives/Install_the_latest_Python_on_CentOS7/">在 CentOS7 安装最新的Python程序</a></li><li class="current"><a href="/wiki/archives/Arch_Linux_Installation_guide/">Arch Linux 安装指南</a></li></ul></div><div class=" "><span><a href="/wiki/category/Windows/">Windows</a><button class="toggle_sidebar fa"></button></span><ul><li class=""><a href="/wiki/archives/MSYS2-environment-configuration/">MSYS2环境配置</a></li><li class=""><a href="/wiki/archives/Windows%E5%88%B7%E6%96%B0DNS/">Windows刷新DNS</a></li><li class=""><a href="/wiki/archives/%E6%B7%BB%E5%8A%A0_Windows_Terminal_%E5%88%B0%E5%8F%B3%E9%94%AE%E8%8F%9C%E5%8D%95/">添加 Windows Terminal 到右键菜单</a></li></ul></div></ul></div><div class=" "><span><a href="/wiki/category/%E6%97%A5%E5%B8%B8%E6%8A%80%E5%B7%A7/">日常技巧</a><button class="toggle_sidebar fa"></button></span><ul><li class=""><a href="/wiki/archives/FFmpeg%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%8F%8A%E5%8F%82%E6%95%B0/">FFmpeg常用命令及参数</a></li><li class=""><a href="/wiki/archives/%E8%A7%A3%E5%86%B3SecuceCRT%E8%BF%9E%E6%8E%A5eNSP%E6%97%B6tab%E9%94%AE%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98/">解决SecuceCRT连接eNSP时tab键乱码问题</a></li><li class=""><a href="/wiki/archives/VS_Code_%E4%B8%80%E9%94%AE%E4%B8%BAMarkDown%E6%96%87%E6%A1%A3%E6%B7%BB%E5%8A%A0_Front_matter/">配置 VS Code 一键为MarkDown文档添加 Front-matter</a></li></ul></div><div class=" "><span><a href="/wiki/category/Web/">Web</a><button class="toggle_sidebar fa"></button></span><ul><li class=""><a href="/wiki/archives/%E4%BD%BF%E7%94%A8JavaScript%E5%AE%9E%E7%8E%B0%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC/">使用JavaScript实现页面跳转</a></li><li class=""><a href="/wiki/archives/Front-end_basics_1/">前端基础之 HTML/CSS 初接触</a></li></ul></div><div class=" "><span><a href="/wiki/category/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a><button class="toggle_sidebar fa"></button></span><ul><div class=" "><span><a href="/wiki/category/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF/">路由交换学习之路</a><button class="toggle_sidebar fa"></button></span><ul><li class=""><a href="/wiki/archives/3-1-%E5%BC%80%E6%94%BE%E5%BC%8F%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E4%BC%98%E5%85%88%E5%8D%8F%E8%AE%AE-OSPF/">3.1-开放式最短路径优先协议(OSPF)</a></li><li class=""><a href="/wiki/archives/2-%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF%E5%8D%8F%E8%AE%AE-RIP/">2-路由信息协议(RIP)</a></li><li class=""><a href="/wiki/archives/1_IP%E8%B7%AF%E7%94%B1%E5%9F%BA%E7%A1%80/">1-IP路由基础</a></li></ul></div><li class=""><a href="/wiki/archives/%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E4%BC%98%E5%85%88%E7%AE%97%E6%B3%95/">最短路径优先算法</a></li><li class=""><a href="/wiki/archives/STP%E9%85%8D%E7%BD%AE%E8%BE%B9%E7%BC%98%E7%AB%AF%E5%8F%A3%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F/">STP配置边缘端口的两种方式</a></li></ul></div><div class=" "><span><a href="/wiki/category/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><button class="toggle_sidebar fa"></button></span><ul><div class=" "><span><a href="/wiki/category/MongoDB/">MongoDB</a><button class="toggle_sidebar fa"></button></span><ul><li class=""><a href="/wiki/archives/Quickly_set_up_MongoDB_environment_with_Docker/">使用Docker快速搭建MongoDB环境</a></li></ul></div><div class=" "><span><a href="/wiki/category/MySQL/">MySQL</a><button class="toggle_sidebar fa"></button></span><ul><li class=""><a href="/wiki/archives/About_MySQL_management/">MySQL管理</a></li><li class=""><a href="/wiki/archives/MySQL_CURD/">SQL 学习笔记</a></li></ul></div></ul></div><div class=" "><span><a href="/wiki/category/Default/">Default</a><button class="toggle_sidebar fa"></button></span><ul><li class=""><a href="/wiki/archives/typography/">Typography</a></li></ul></div>

                    </section>
                    <section hidden class="sidebar-external-link">
                        
                            <div class="external"><span><a href="https://home.oopsky.top/">HOME</a><button class="go-external"><i class="fa fa-external-link"></i></button></span></div>
                        
                            <div class="external"><span><a href="https://blog.oopsky.top/">部落格</a><button class="go-external"><i class="fa fa-external-link"></i></button></span></div>
                        
                    </section>
                    <section class="maverick">
                        <div><span style="border: 1px solid #d4dadf;"><a href="https://github.com/AlanDecode/Maverick" target="_blank">Maverick & Kepler</a></span></div>
                    </section>
                </aside>
                <div id="content-wrapper">
                    <div id="content">
    <section>
        <h1 class="post-title">Arch Linux 安装指南</h1>
        <p class="post-meta">
            <time>July 27 2019</time>
            <span class="tags">
                
                <span>
                    <a href="/wiki/tag/Linux/">#Linux</a>
                </span>
                
                <span>
                    <a href="/wiki/tag/Arch%20Linux/">#Arch Linux</a>
                </span>
                
            </span>
        </p>
        <article class="yue"><blockquote>
<p>凡事总须研究，才会明白。网友总劝我放弃，我也还记得，可是不甚清楚。我翻开教程一查，这教程没有年代，歪歪斜斜的每页上都写着“XX速成”几个字。我横竖睡不着，仔细看了半夜，才从字缝里看出字来，满本都写着两个字是“劝退”！</p>
</blockquote>
<!--more-->
<h1>基本步骤</h1>
<ul>
<li>准备环境（Arch Linux的ISO文件，良好的网络等）</li>
<li>制作安装介质并启动到live环境</li>
<li>准备分区</li>
<li>安装系统并生成 fstab文件</li>
<li>启动到船新的ArchLinux</li>
<li>基本配置</li>
</ul>
<h2>1. 准备安装环境</h2>
<h3>1.1 ISO</h3>
<p>要安装ArchLinux，我们必须下载一个ISO（安装镜像）来启动到Live环境，这个ISO文件可以从 <a href="https://www.archlinux.org/download/">官方下载页面</a>获取，</p>
<h3>1.2 联网</h3>
<h4>为什么需要联网</h4>
<p>想要正常安装一个Arch Linux，没有网络是万万不行的，因为不同于Manjaro、openSUSE、Ubuntu，Cent OS、Debian等其他发行版，那些发行版的核心软件包放在了安装镜像里，所以它们的ISO文件常常是<strong>巨大</strong>的，动辄两三个G。而Arch Linux没有在ISO中内置那些包，所有的软件包都在软件源上，这种方式极大地压缩了 Arch ISO 的大小，并能保证系统安装完就是最新的。缺点是安装时必须联网。笔者写下这篇文章时最新的镜像的大小只有609MB，是不是很小呢。</p>
<h2>2. 制作安装介质</h2>
<ul>
<li><p>推荐使用<strong><a href="https://rufus.ie/">Rufus</a></strong>制作安装介质（<strong>请确保U盘内没有重要文件，此操作会清除所有的数据！</strong>）。制作完成后，你需要先关闭<strong>Win10的快速启动</strong>，然后去 EFI 固件设置里<strong>关掉安全启动（Secure Boot）</strong>，才能启动到你的Live系统</p>
</li>
<li><p>如果你想装到虚拟机中，在新建虚拟机时，安装程序光盘文件选择你下载的ISO文件即可</p>
</li>
</ul>
<p><figure><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/1403889335a66e644b5900e9f6cf9edd.png"><img data-width="564" data-height="549" src="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/1403889335a66e644b5900e9f6cf9edd.png" alt="选择你下载的ISO文件" /></a><figcaption>选择你下载的ISO文件</figcaption></figure></p>
<h2>3. 启动到Live环境</h2>
<blockquote>
<p>为了方便截图，此处我是用VMware的UEFI模式做的演示，与真机下操作并无区别</p>
</blockquote>
<p>VMware开启UEFI：虚拟机&gt;设置&gt;选项&gt;高级&gt;固件类型</p>
<p><figure><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/d7eed4201ee402cd9996c7a6d73f564a.png"><img data-width="852" data-height="940" src="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/d7eed4201ee402cd9996c7a6d73f564a.png" alt="VMware 开启 UEFI" /></a><figcaption>VMware 开启 UEFI</figcaption></figure></p>
<h3>3.1 检查你的网络</h3>
<h5>有线网络</h5>
<p>如果你的电脑是通过网线连接到路由器的话（这种情况下一般都能自动分配IP地址），在进入到Live系统后，使用 <code>dhcpcd</code> 指令来联网，然后使用 <code>ping www.baidu.com</code>检测，如果你能得到回应，说明网络是正常联通的。相关链接：<a href="https://wiki.archlinux.org/index.php/Network_configuration#Static_IP_address">静态IP</a>，<a href="https://wiki.archlinux.org/index.php/Network_configuration#DHCP">动态IP</a>，<a href="https://wiki.archlinux.org/index.php/Dhcpcd">dhcpcd</a></p>
<p><figure><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/f3ddc7ad36d1b8c6db949326c5e3b890.png"><img data-width="612" data-height="263" src="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/f3ddc7ad36d1b8c6db949326c5e3b890.png" alt="联网and检测" /></a><figcaption>联网and检测</figcaption></figure></p>
<h5>无线网络</h5>
<p>如果你想连接无线网络，可以使用 <code>wifi-menu</code> 这个工具连接无线网络。如果此工具无法帮助你成功连接无线网络，请寻找一个较合适的网络环境。或百度你的问题，然后使用 <code>ping www.baidu.com</code> 来检查你的网络连接。有关无线网络的更多配置请去<a href="https://wiki.archlinux.org/index.php/Wireless_network_configuration">官方Wiki</a>查看</p>
<h3>3.2 更新系统时间</h3>
<p>使用 <a href="https://jlk.fjfi.cvut.cz/arch/manpages/man/timedatectl.1">timedatectl</a> 确保系统时间是准确的：
执行以下命令:</p>
<div class="highlight"><pre><span></span>timedatectl set-ntp <span class="nb">true</span>
</pre></div>
<p>然后可以使用 <code>timedatectl status</code> 检查服务状态。<strong>注意，UTC 时间通常和你的本地时间不相同</strong>。</p>
<p><figure><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/6c1cfd265a8163f55015c17bae1ef142.png"><img data-width="452" data-height="168" src="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/6c1cfd265a8163f55015c17bae1ef142.png" alt="检查ntp服务状态" /></a><figcaption>检查ntp服务状态</figcaption></figure></p>
<blockquote>
<p>我截下这张图时，本地时间是2019-5-8 18:01</p>
</blockquote>
<h2>4. 分区</h2>
<blockquote>
<p>本文针对单硬盘结构，即只有一块常规硬盘</p>
</blockquote>
<h3>4.1 分区前的准备工作</h3>
<h4>4.1.1检查硬盘结构</h4>
<p>执行<code>fdisk -l</code>检查你的硬盘结构</p>
<p><figure><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/ca1d664b81855c6f19d3aec787d374bb.png"><img data-width="508" data-height="196" src="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/ca1d664b81855c6f19d3aec787d374bb.png" alt="检查硬盘结构" /></a><figcaption>检查硬盘结构</figcaption></figure></p>
<ul>
<li><p>如果你的硬盘是普通硬盘，它的名字应该是形似<code>/dev/sdx</code>，</p>
</li>
<li><p>如果你的硬盘是固态硬盘，它的名字应该是形似<code>/dev/nvmeXnY</code>，<code>X</code> 和 <code>Y</code> 都是数字，通常 <code>X</code> 是 <code>0</code>，<code>Y</code> 是 <code>1</code>；</p>
</li>
<li><p><strong>一定要注意硬盘名后面的大小，其中有一个很有可能是你的 U 盘</strong>，此处我给这个虚拟机分配了8GiB的虚拟磁盘</p>
</li>
</ul>
<h4>4.1.2 分区规划</h4>
<p><figure><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/2366024ab3c69e45492d469b32095127.png"><img data-width="563" data-height="169" src="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/2366024ab3c69e45492d469b32095127.png" alt="从Arch Wiki截的图" /></a><figcaption>从Arch Wiki截的图</figcaption></figure></p>
<p>我准备建立以下分区：</p>
<p><code>/mnt/boot /dev/sda1 512MiB</code></p>
<p><code>swap /dev/sda2 1GiB</code></p>
<p><code>/mnt /dev/sda3 剩余</code></p>
<blockquote>
<p>swap分区根据实际情况，可建可不建，其大小一般与RAM大小相同</p>
</blockquote>
<h3>4.2 开始分区</h3>
<blockquote>
<p>我使用的是<strong>cfdisk</strong> — 使用 ncurses 库编写的具有伪图形界面的命令行分区工具</p>
</blockquote>
<p>执行以下命令打开分区程序</p>
<div class="highlight"><pre><span></span>cfdisk /dev/sda
</pre></div>
<p>如果出现以下界面，请选择<code>gpt</code>，因为我们使用的是UEFI</p>
<p><figure><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/12ac12bc915fa7a9f97d13eb2de86b32.png"><img data-width="273" data-height="206" src="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/12ac12bc915fa7a9f97d13eb2de86b32.png" alt="选择 label type" /></a><figcaption>选择 label type</figcaption></figure></p>
<p>然后进入分区界面</p>
<p><figure><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/ff383241cdc9f48895e0a687103b2b5a.png"><img data-width="1027" data-height="817" src="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/ff383241cdc9f48895e0a687103b2b5a.png" alt="cfdisk分区工具" /></a><figcaption>cfdisk分区工具</figcaption></figure></p>
<p>使用左右方向键更改当前选项，</p>
<p>使用上下方向键更改当前分区/硬盘，</p>
<ol>
<li>选择<code>Free space</code>并在<code>New</code>处回车新建一个Partition，</li>
<li>把 <code>Partition size：</code>后面的字符改为<code>512M</code> (<strong><code>M</code>、<code>G</code>等字符必须大写</strong>)</li>
<li>移动光标到<code>Type</code>回车，选择<code>EFI System</code></li>
</ol>
<p>完成上述操作后，我们将看到：</p>
<p><figure><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/16b4ca7f1f97a84ef4163f2a8e698355.png"><img data-width="1025" data-height="821" src="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/16b4ca7f1f97a84ef4163f2a8e698355.png" alt="建立分区" /></a><figcaption>建立分区</figcaption></figure></p>
<blockquote>
<p>第一个建立的分区是sda1,第二个是sda2，依此类推</p>
</blockquote>
<p>继续执行上面三个步骤，swap分区选择<code>Linux swap</code>，mnt分区选择<code>Linux filesystem</code>(最后一个分区不用更改大小，直接默认即可)</p>
<p>最后是这样</p>
<p><figure><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/be74c23afc03ba0fff636fe1dd60bd1f.png"><img data-width="1020" data-height="323" src="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/be74c23afc03ba0fff636fe1dd60bd1f.png" alt="建立分区" /></a><figcaption>建立分区</figcaption></figure></p>
<p>还没完，此时我们只是把规划好的分区告诉cfdisk,还差最后一步才完成分区建立，</p>
<p><strong>注意！下面是危险操作!!</strong></p>
<p>把光标移到<code>Write</code>并确认</p>
<p>此时会提醒你输入<code>yes</code> or <code>no</code></p>
<p>![确认修改][11]</p>
<p>输入<code>yes</code>,然后选定<code>Quit</code></p>
<p>再执行<code>fdisk -l</code>检查一下你的分区</p>
<p>![检查分区][12]</p>
<p>确认无误后，执行以下命令分别为每个分区建立文件系统</p>
<div class="highlight"><pre><span></span>mkfs.fat -F32 /dev/sda1
mkswap /dev/sda2
mkfs.ext4 -L root /dev/sda3
</pre></div>
<p>在上面的指令第一句中，我们为 /dev/sda1 分区，也就是 sda 磁盘的第一块分区，建立了 fat 文件系统；<code>-F32</code> 表明我们建立的是 fat32 而非 fat16 或其它不是我们想要的 fat。</p>
<p>而在第二句中，我们为 /dev/sda2 创建了专用于 swap 的存储系统；这是一个特殊的分区类型，它很难被当作 filesystem，所以建立它的指令是 <code>mkswap</code> 而非 <code>mkfs.sth</code>。</p>
<p>在最后一条指令中，我们为 /dev/sda3 建立了一个 ext4 文件系统；<code>-L root</code> 选项表示设置这个新分区的标签为 <code>root</code>，以便于后续引用它。不设定标签也是可以的，但以后我们将只能通过分区的 UUID （很长一串）来引用它，可读性不高，也很容易抄错。</p>
<h3>4.3 挂载分区</h3>
<h4>Linux 系统目录结构</h4>
<p>和Windows不同，Linux整个目录结构只有<strong>一个根</strong>，也就是 <code>/</code>，其他目录，比如 <code>/usr</code>，<code>/boot</code>，<code>/home</code> 之类都存放于根目录之下，其关系如下图所示</p>
<p><figure><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/e0f1cf67a1fc492d4f05de8884c6c424.jpg"><img data-width="690" data-height="295" src="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/e0f1cf67a1fc492d4f05de8884c6c424.jpg" alt="linux目录结构" /></a><figcaption>linux目录结构</figcaption></figure></p>
<h4>关于挂载</h4>
<p><figure><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/ae4219a499c61a97635344eede10df68.png"><img data-width="1004" data-height="259" src="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/ae4219a499c61a97635344eede10df68.png" alt="mount a file system" /></a><figcaption>mount a file system</figcaption></figure></p>
<blockquote>
<p>图片截取自<a href="https://wiki.archlinux.org/index.php/File_systems#Mount_a_file_system">官方Wiki</a></p>
</blockquote>
<p>图片中最下面那两行英文的意思是</p>
<blockquote>
<p><em>这会将/dev/sda1上的文件系统附加到目录/mnt，从而使文件系统的内容可见。在卸载设备之前，在此操作之前存在于/mnt的任何数据都将不可见。</em></p>
</blockquote>
<p>我对这句话的理解：</p>
<blockquote>
<p>把/dev/sda1挂载到目录/mnt后，
/mnt这个目录就会指向/dev/sda1上的文件系统，
此时访问/mnt就等同于访问/dev/sda1，
并且原本/mnt这个目录下存在的文件对系统来说是不可见的，
直到你从/mnt卸载/dev/sda1</p>
</blockquote>
<h4>开始挂载分区</h4>
<ol>
<li>启用交换分区</li>
</ol>
<div class="highlight"><pre><span></span>swapon /dev/sda2
</pre></div>
<p>可以使用 <code>swapon --show</code> 来检查交换分区有没有被正确启用</p>
<p><figure><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/1676a186a6db5e84309ef5f264bea25f.png"><img data-width="286" data-height="89" src="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/1676a186a6db5e84309ef5f264bea25f.png" alt="检查" /></a><figcaption>检查</figcaption></figure></p>
<ol start="2">
<li>挂载根到live系统的/mnt</li>
</ol>
<div class="highlight"><pre><span></span>mount /dev/sda3 /mnt
</pre></div>
<ol start="3">
<li>创建/boot并挂载</li>
</ol>
<div class="highlight"><pre><span></span>mkdir /mnt/boot
mount /dev/sda1 /mnt/boot
</pre></div>
<blockquote>
<p><code>mount</code> 指令不会产生输出</p>
</blockquote>
<h2>5. 安装 Arch Linux</h2>
<h3>5.1 修改软件源</h3>
<p>使用vim或nano等编辑器编辑 <code>/etc/pacman.d/mirrorlist</code>，
执行 <code>vi /etc/pacman.d/mirrorlist</code> 或<code>nano /etc/pacman.d/mirrorlist</code>
然后把<code>## China</code>及其下面的字符挪到文件最前面</p>
<blockquote>
<p>可以把清华和科大的镜像源也加上</p>
</blockquote>
<p><figure><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/1d7b49f19715a9b00060aaa14881935a.png"><img data-width="652" data-height="595" src="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/1d7b49f19715a9b00060aaa14881935a.png" alt="mirrorlist" /></a><figcaption>mirrorlist</figcaption></figure></p>
<h3>5.2 使用 pacstrap 安装系统</h3>
<div class="highlight"><pre><span></span>pacstrap /mnt base base-devel dialog ntfs-3g wpa_supplicant
</pre></div>
<p>​	命令解释：</p>
<p>​	<code>pacstrap</code> ：Arch Linux 中用来安装系统的脚本工具</p>
<p>​	<code>pacstrap &lt;安装目录&gt; [要安装的软件包(组)，多个软件包(组)之间用空格隔开]</code></p>
<p>​	<code>base</code>：<strong>必选</strong>。Arch Linux基本系统，</p>
<p>​	<code>base-devel</code>：可选。但最好装上，它里面包含很多重要的工具</p>
<p>​	<code>dialog</code>：可选。图形化的shell，<code>wifi-menu</code>就在这个软件包组里</p>
<p>​	<code>ntfs-3g</code>：可选。 提供NTFS文件系统支持</p>
<p>​	<code>wpa_supplicant</code>：可选。提供 WPA 认证支持(与wifi-menu搭配使用)</p>
<p>敲回车确认后，稍等一会</p>
<h3>5.3 生成fstab文件</h3>
<p>找到有一段关于<a href="https://jlk.fjfi.cvut.cz/arch/manpages/man/fstab.5">fstab</a>文件的介绍</p>
<div class="highlight"><pre><span></span>fstab - static information about the filesystems
</pre></div>
<p>意思是：有关文件系统的静态信息
它告诉系统启动时该如何挂载各分区的表</p>
<p>使用以下命令生成 <a href="https://wiki.archlinux.org/index.php/Fstab">fstab</a> 文件</p>
<div class="highlight"><pre><span></span>genfstab /mnt &gt; /mnt/etc/fstab
</pre></div>
<h3>5.4 chroot</h3>
<p>上面在5.2中我们已完成了系统的安装，但此时还无法启动新系统</p>
<p>我们还需要以下操作：</p>
<p><a href="https://wiki.archlinux.org/index.php/Change_root">Change root</a> 到新安装的系统：
执行以下命令</p>
<div class="highlight"><pre><span></span>arch-chroot /mnt
</pre></div>
<h2>6. 基本配置</h2>
<h3>6.1 配置时区</h3>
<p>中国大陆地区执行如下命令配置</p>
<div class="highlight"><pre><span></span>ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
</pre></div>
<h3>6.2本地化</h3>
<p>使用vim或nano等编辑器编辑编辑<code>/etc/locale.gen</code></p>
<p>找到以下几行，去掉前面的<code>#</code></p>
<div class="highlight"><pre><span></span>#en_US.UTF-8 UTF-8
#zh_CN.UTF-8 UTF-8
#zh.HK_UTF-8 UTF-8
#zh_TW.UTF-8 UTF-8
</pre></div>
<p>接着执行 <code>locale-gen</code> 以生成 locale 讯息：</p>
<div class="highlight"><pre><span></span>locale-gen
</pre></div>
<p>这个命令会在<code>/etc/locale.gen</code> 生成指定的本地化文件。</p>
<p>执行以下命令创建 <code>locale.conf</code></p>
<div class="highlight"><pre><span></span>localectl set-locale <span class="nv">LANG</span><span class="o">=</span>zh_CN.UTF-8
</pre></div>
<p>还需要安装中文字体,否则会导致显示错误</p>
<div class="highlight"><pre><span></span>pacman -S noto-fonts-cjk
</pre></div>
<h3>6.3 网络相关设置</h3>
<ol>
<li><p>创建<code>/etc/hostname</code>文件并写入你的主机名</p>
<p><figure><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/123247d12eeff56632ec1ce198b9939a.png"><img data-width="822" data-height="302" src="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/archives/assets/123247d12eeff56632ec1ce198b9939a.png" alt="hostname" /></a><figcaption>hostname</figcaption></figure></p>
</li>
</ol>
<h3>6.3 配置引导程序</h3>
<ol>
<li>安装<code>grub</code>和<code>efibootmgr</code>软件包</li>
</ol>
<div class="highlight"><pre><span></span>pacman -S grub efibootmgr
</pre></div>
<ol start="2">
<li>安装<code>grub</code>到 <code>/boot</code></li>
</ol>
<div class="highlight"><pre><span></span>grub-install --efi-directory<span class="o">=</span>/boot
</pre></div>
<ol start="3">
<li>自动生成配置文件</li>
</ol>
<div class="highlight"><pre><span></span>grub-mkconfig -o /boot/grub/grub.cfg
</pre></div>
<h3>6.4 设置 root 密码</h3>
<p>输入<code>passwd</code>后敲回车键，然后设置你的root密码，</p>
<blockquote>
<p>需要注意的是linux中大部分需要输入密码的场合中，输入<strong>密码不会被显示</strong>，在此处还请放心大胆的输，如果你觉得自己输错了，那就狂敲退格键直到你觉得已经删完了之前输入的内容再重输就可以了@_@</p>
</blockquote>
<h2>7. 重启到你的Arch Linux</h2>
<h3>7.1 手动卸载被挂载的分区</h3>
<p>执行以下命令手动卸载被挂载的分区</p>
<div class="highlight"><pre><span></span>umount -R /mnt
</pre></div>
<h3>7.2 重启</h3>
<p>执行以下命令重启系统</p>
<div class="highlight"><pre><span></span>reboot
</pre></div>
<p>至此就安装完了^_^</p>
<blockquote>
<p>本文内容参考<a href="https://wiki.archlinux.org/index.php/Installation_guide"> ArchWiki</a>以及<a href="https://amane.live/2018/11/26/install-arch/">amane的博客</a></p>
</blockquote>
</article>
    </section>

    
    <section id="content-pager">
        
            <div class="next">
                <a class="card" href="/wiki/archives/Install_the_latest_Python_on_CentOS7/">
                    <time>August 14 2019</time>
                    <span>在 CentOS7 安装最新的Python程序</span>
                </a>
            </div>
        
        
            <div class="prev">
                <a class="card" href="/wiki/archives/typography/">
                    <time>November 09 2018</time>
                    <span>Typography</span>
                </a>
            </div>
        
    </section>
    

    
        <section id="comments">
            <div id="vcomments"></div>
        </section>
        <script>
            window.ValineOpt = {"visitor": true, "appKey": "izWn3Ac4YE5DLNUzgIOKodoo", "appId": "x0FuLvAqOhV3d8bNU34zT0s4-gzGzoHsz", "recordIP": true, "enable": true, "el": "#vcomments", "verify": true, "placeholder": "\u8bf7\u4e0d\u541d\u8d50\u6559~", "notify": true};
            window.ValineOpt.path = window.location.pathname;
        </script>
    

    <script>
        document.body.classList.add('content');
        document.body.classList.remove('archive');
    </script>
</div>
                    <footer>
                        <span>Copyright © 2020 waleslau</span>
                        
    <span class="leancloud_visitors"
            id="/archives/Arch_Linux_Installation_guide/" 
            data-flag-title="Arch Linux 安装指南">
            <i class="fa fa-eye"></i> <i style="font-style: normal" class="leancloud-visitors-count"></i> Views
        </span>

                        <span class="addon">
<span id="jinrishici-sentence">正在加载今日诗词....</span>
<script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
<!--
<a no-style href="http://www.beian.gov.cn" target="_blank">豫ICP备19025987-2号</a> | 
<a no-style href="https://www.upyun.com" target="_blank">又拍云</a>
-->
</span>
                    </footer>
                </div>
                
<aside id="toc-container" class="no-scrollbar">
    <span><i class="fa fa-align-right"></i> CONTENTS</span>
    <div id="toc"></div>
</aside>

            </div>
        </main>


        <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/jquery-pjax@2.0.1/jquery.pjax.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/tocbot@4.10.0/dist/tocbot.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/assets/kepler-ef161b04d5.js"></script>
        <script>
            function ExSearchCall(item){
                if (item && item.length) {
                    $('.ins-close').click(); // 关闭搜索框
                    $('input.ins-search-input').val(''); // 清空
                    let url = item.attr('data-url'); // 获取目标页面 URL
                    $.pjax({url: url, 
                        container: '#pjax-container',
                        fragment: '#pjax-container',
                        timeout: 8000, }); // 发起一次 PJAX 请求
                }
            }
        </script>

        <!--Valine-->
        
            <script>
                var initValine = function () {
                    if (typeof window.ValineOpt === 'object' && $(window.ValineOpt.el).length) {
                        new Valine(window.ValineOpt);
                    }
                }
            </script>
            <script async src='https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js' onload="initValine()"></script>
        

        <!--fancybox-->
        <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

        <!--ExSearch-->
        <script src="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/assets/ExSearch/ExSearch-493cb9cd89.js"></script>
        
        <!--katex-->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/assets/katex.min.css">
        <script defer src="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/assets/katex.min.js"></script>
        <script>
        mathOpts = {
            delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "\\[", right: "\\]", display: true},
                {left: "$", right: "$", display: false},
                {left: "\\(", right: "\\)", display: false}
            ]
        };
        </script>
        <script defer src="https://cdn.jsdelivr.net/gh/waleslau/wiki@gh-pages/assets/auto-render.min.js" onload="renderMathInElement(document.body, mathOpts);"></script>

        
    </body>
</html>